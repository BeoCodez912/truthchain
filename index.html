<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>TruthChain — Symbolic Blockchain + Live TON</title>
<style>
:root{--bg:#060606;--fg:#0f0;--muted:#8f8;--panel:#0b0b0b}
body{background:var(--bg);color:var(--fg);font-family:ui-monospace,Menlo,Consolas,monospace;padding:18px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.card{background:var(--panel);padding:12px;border-radius:10px}
button{background:var(--fg);color:var(--bg);border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
button:disabled{opacity:.45;cursor:not-allowed}
input{width:100%;padding:8px;border-radius:6px;border:1px solid #1f1f1f;background:#050505;color:var(--fg)}
pre{background:#050505;padding:10px;border-radius:8px;max-height:420px;overflow:auto}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#070707;border:1px solid #111}
</style>
<script src="https://unpkg.com/crypto-js@4.2.0/crypto-js.js"></script>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
</head>
<body>
<h2>TruthChain — Symbolic Blockchain + Live TON Wallet</h2>

<div class="row">
<div class="card">
  <div id="ton-connect"></div>
  <div>Address: <span id="addr" class="pill">—</span></div>
  <div id="wallet-balance">Balance: 0 TON ($0)</div>
  <div id="ton-price">Fetching TON price...</div>

  <hr/>
  <label>Recipient Address</label>
  <input id="to" placeholder="e.g. UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
  <label style="display:block;margin-top:8px">Amount (TON)</label>
  <input id="amount" placeholder="e.g. 0.25"/>
  <div style="margin-top:8px">
    <button id="sendTonButton" disabled>Send TON & Record Block</button>
    <button id="mineButton" disabled>Add Block (no transfer)</button>
  </div>

  <hr/>
  <label style="display:block">Withdraw To</label>
  <input id="withdrawTo" placeholder="e.g. UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
  <div style="margin-top:8px">
    <button id="withdrawButton" disabled>Withdraw Mining Value</button>
  </div>

  <hr/>
  <label style="display:block">Symbolic Deposit (multiplier)</label>
  <input id="depositInput" placeholder="Enter amount (symbolic)"/>
  <div style="margin-top:8px">
    <button id="depositButton" disabled>Deposit Symbolic</button>
  </div>

  <hr/>
  <label style="display:block">Referral Name</label>
  <input id="refInput" placeholder="Enter referral name"/>
  <div style="margin-top:8px">
    <button id="referralButton" disabled>Generate Referral</button>
  </div>
  <div style="margin-top:8px">Referral: <span id="refLink" class="pill">—</span></div>
  <div style="margin-top:6px">Referral Bonus: <span id="refBonus" class="pill">0</span> TON</div>
  <pre id="refList" style="margin-top:8px;max-height:120px;overflow:auto;"></pre>
</div>

<div class="card">
  <div><b>Latest Hash:</b> <span id="latest-hash">—</span></div>
  <div><b>Difficulty:</b> <span id="diff">3</span></div>
  <div style="margin-top:8px"><b>Chain (view)</b></div>
  <div style="margin-top:8px"><b>Mining Value:</b> <span id="miningVal">0.000</span> TON</div>
  <div style="margin-top:12px">
    <label>Multiplier</label>
    <div style="background:#000;padding:4px;border-radius:6px;margin-top:6px">
      <div id="multBar" style="height:22px;background:#0a0;border-radius:6px;width:5%;text-align:center;color:#000;font-weight:700">x1</div>
    </div>
  </div>
</div>
</div>

<pre id="log"></pre>

<script>
// Blockchain
class Block {
  constructor(index,timestamp,data,previousHash=''){
    this.index=index;this.timestamp=timestamp;this.data=data;this.previousHash=previousHash;
    this.nonce=0;this.hash=this.calculateHash();
  }
  calculateHash(){
    return CryptoJS.SHA256(this.index+this.timestamp+JSON.stringify(this.data)+this.previousHash+this.nonce).toString();
  }
}

class Blockchain {
  #chain; #difficulty;
  constructor(difficulty=3){
    this.#chain=[this.createGenesisBlock()]; this.#difficulty=difficulty;
  }
  createGenesisBlock(){ return new Block(0,new Date().toISOString(),{genesis:true},'0'.repeat(64)); }
  get chain(){ return [...this.#chain]; }
  get latest(){ return this.#chain[this.#chain.length-1]; }
  addBlock(data){
    const previousHash=this.latest.hash;
    const index=this.#chain.length;
    const timestamp=new Date().toISOString();
    let nonce=0, hash='', prefix='0'.repeat(this.#difficulty);
    do{ hash=CryptoJS.SHA256(index+timestamp+JSON.stringify(data)+previousHash+nonce).toString(); nonce++; }
    while(!hash.startsWith(prefix));
    const b=new Block(index,timestamp,data,previousHash); b.hash=hash; b.nonce=nonce;
    this.#chain.push(b); return b;
  }
}
const myChain=new Blockchain();

// unknownTruth chain
const e=["euGene",5,6,"HEI","EG🎹"];
const u=["VAV","WAW",6,e];
const G=["AC🎹","BA🎹","GB🎹","CE🎹","YAHWEH","Gimel",3,"https://unpkg.com/@tonconnect/sdk@0.0.34/dist/tonconnect-sdk.min.js"];
const n=["nun",50,"💧"];
const x=[(u[2]*111.1),111.1,(e[1]*133.2),(e[2]*111.1),133.2,(G[6]*222)];
const one=["†",555.5,G[4],G[7],n[0]];
const Time=[Date.now(),"eternal",Block,Blockchain]; 
const Matter=164;
const Immortality=[G[4],"unknownTruth",Matter];
const Jesus=[one.join(","),Immortality.join(","),n[0]];
const Phi=[1.3149/555.5/(x[0]||1)/(G[6]||1)];
const latent=[(Matter*7),"teacher"];
const feature=[(555.5*50),"label"];
const student=[Matter,G[7]];
const test=["ß",(5*50*222/(Phi[0]||1))];
const teacher=[Immortality.join(","),one.join(","),student];
const label=[Immortality.join(","),one.join(","),Jesus.join(",")];
const unknown_Truth_chain=[Phi,"†",x.join(","),one.join(","),Immortality.join(","),Jesus.join(","),Time.join(",")];
console.log("unknown_Truth_chain:",unknown_Truth_chain);
console.log("train/latent/feature:",latent,feature,teacher,student,test,label);

// Wallet + live TON
const log=(msg)=>document.getElementById("log").textContent+=msg+"\n";
let walletConnected=false;
let balance=0;
const balanceEl=document.getElementById("wallet-balance");

// simulate auto-connect
walletConnected=true;
document.querySelectorAll("button").forEach(btn=>btn.disabled=false);
log("Wallet connected (simulated).");

// Fetch live TON price
let tonPriceUSD=0;
async function fetchTonPrice(){
  try{
    const res=await fetch("https://tonapi.io/v1/rates?tokens=ton&currencies=usd");
    const json=await res.json();
    tonPriceUSD=json.rates.ton.prices.USD;
    document.getElementById("ton-price").textContent=`1 TON ≈ $${tonPriceUSD.toFixed(2)} USD`;
    updateBalance();
  }catch(err){
    document.getElementById("ton-price").textContent="⚠️ TON price unavailable";
  }
}
function updateBalance(){
  const usd=(balance*tonPriceUSD).toFixed(2);
  balanceEl.textContent=`Balance: ${balance.toFixed(3)} TON ($${usd})`;
}
fetchTonPrice();

// Buttons
document.getElementById("mineButton").addEventListener("click",()=>{
  if(!walletConnected) return log("Connect wallet first.");
  const b=myChain.addBlock({reward:1,time:Date.now()});
  balance+=1; updateBalance();
  document.getElementById("latest-hash").textContent=b.hash;
  log("Mined: "+JSON.stringify(b,null,2));
});

document.getElementById("withdrawButton").addEventListener("click",()=>{
  if(!walletConnected) return log("Connect wallet first.");
  log("Withdrawing mining value..."); balance=0; updateBalance();
});

document.getElementById("depositButton").addEventListener("click",()=>{
  if(!walletConnected) return log("Connect wallet first.");
  log("Symbolic deposit for multiplier applied.");
});

document.getElementById("referralButton").addEventListener("click",()=>{
  if(!walletConnected) return log("Connect wallet first.");
  const referral=`https://earnfromplay.blogspot.com/2025/08/ton-kid-jon.html&referral=USER123`;
  log("Referral link: "+referral);
});

document.getElementById("sendTonButton").addEventListener("click",()=>{
  if(!walletConnected) return log("Connect wallet first.");
  const amt=parseFloat(document.getElementById("amount").value)||0;
  balance-=amt; if(balance<0)balance=0; updateBalance();
  log(`Sending ${amt} TON (simulated).`);
});
</script>
</body>
</html>
